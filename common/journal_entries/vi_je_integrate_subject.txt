
je_integrate_subject = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		random_country = {
			limit = {
				is_subject_of = root
				has_journal_entry = je_integration_target
				NOT = { has_variable = integration_progress_var }
			}

			save_scope_as = integration_target

			set_variable = {
				name = integration_progress_var
				value = 0
			}
		}

		set_variable = {
			name = integration_progress_var
			value = 0
		}

		add_modifier = {
			name = modifier_subject_integration_cost
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					is_at_war = no
				}

				scope:integration_target = {
					change_variable = {
						name = integration_progress_var
						add = 1
					}
				}

				change_variable = {
					name = integration_progress_var
					add = 1
				}
			}
		}
	}

	current_value = {
		value = root.var:integration_progress_var
	}

	goal_add_value = {
		add = 12
	}

	progressbar = yes

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		remove_modifier = modifier_subject_integration_cost
	}

	fail = {
		OR = {
			has_war_with = scope:integration_target
			scope:integration_target = {
				NOT = { is_subject_of = root }
			}
		}
	}

	should_be_pinned_by_default = yes

	weight = 10000
}

je_integration_target = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		overlord = {
			save_scope_as = overlord_scope
		}
	}

	current_value = {
		value = root.var:integration_progress_var
	}

	goal_add_value = {
		add = 12
	}

	progressbar = yes

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		overlord = {
			annex = root
		}
	}

	fail = {
		OR = {
			has_war_with = overlord
			NOT = { is_subject_of = scope:overlord_scope }
		}
	}

	should_be_pinned_by_default = yes

	weight = 10000
}