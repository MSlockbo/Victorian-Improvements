
integrate_subject = {
	requires_approval = yes
	should_notify_third_parties = yes
	can_use_obligations = yes

	potential = {
		scope:target_country = {
			is_direct_subject_of = root

			custom_tooltip = {
				text = DIPLO_ACTION_MARKET_CONNECTION_REQUIRED
				OR = {	
					AND = {
						market = { has_port = yes }
						scope:target_country.market = { has_port = yes }
					}
					scope:actor.market = {
						any_scope_country = {
							is_adjacent_to_country = root
						}
					}
				}
			}

			NOT = { has_journal_entry = je_integration_target }

			OR = {
				is_subject_type = subject_type_puppet
				is_subject_type = subject_type_vassal
			}
			NOT = {
				is_country_type = colonial
			}
		}
	}

	possible = {
		custom_tooltip = {
			text = integration_in_progress_tt

			NOT = { has_journal_entry = je_integrate_subject }
		}

		bureaucracy >= 1000

		is_revolutionary = no

		scope:target_country = {
			is_revolutionary = no
			NOT = { has_truce_with = root }
		}

		is_at_war = no
		scope:target_country = { is_at_war = no }
	}

	accept_effect = {
		if = {
			limit = {
				NOT = { has_journal_entry = je_integrate_subject }
			}

			custom_tooltip = {
				text = begin_integration_tt

				scope:target_country = {
					add_journal_entry = { type = je_integration_target }
				}
				add_journal_entry = { type = je_integrate_subject }
			}
		}
	}
}